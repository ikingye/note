<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="2020 年 7 月 17 日（星期五） #  今日待办 #      编程 #  Istio #  ingressGateway 代理 #  server { listen 8500; location / { proxy_pass http://localhost:31443; # nginx 反向代理默认走的 http 1.0 版本 # 但是 被反向代理的服务器是 1.1 版本的！ proxy_http_version 1.1; } error_log /var/log/nginx/istio-ingressgateway_error.log; access_log /var/log/nginx/istio-ingressgateway_access.log; } rate limit #  安装
# Policy enforcement must be enabled istioctl install --set profile=demo --set meshConfig.disablePolicyChecks=false --set values.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="2020-07-17" />
<meta property="og:description" content="2020 年 7 月 17 日（星期五） #  今日待办 #      编程 #  Istio #  ingressGateway 代理 #  server { listen 8500; location / { proxy_pass http://localhost:31443; # nginx 反向代理默认走的 http 1.0 版本 # 但是 被反向代理的服务器是 1.1 版本的！ proxy_http_version 1.1; } error_log /var/log/nginx/istio-ingressgateway_error.log; access_log /var/log/nginx/istio-ingressgateway_access.log; } rate limit #  安装
# Policy enforcement must be enabled istioctl install --set profile=demo --set meshConfig.disablePolicyChecks=false --set values." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ikingye.github.io/note/docs/live/diary/2020/07/17/" />
<meta property="article:modified_time" content="2020-07-21T00:04:05+08:00" />
<title>2020-07-17 | 叶王笔记</title>
<link rel="manifest" href="/note/manifest.json">
<link rel="icon" href="/note/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/note/book.min.054d088be523033861c169923260cc3eacd88fa7d58c8be9c5071b5a83323017.css" integrity="sha256-BU0Ii&#43;UjAzhhwWmSMmDMPqzYj6fVjIvpxQcbWoMyMBc=">
<script defer src="/note/en.search.min.fe9e7bfb990a53276da7565dc76229c5d3d3ef4081556e424710dcf0885013a5.js" integrity="sha256-/p57&#43;5kKUydtp1Zdx2IpxdPT70CBVW5CRxDc8IhQE6U="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir=>
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/note"><span>叶王笔记</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>



<ul>
  <li><a href="https://kingye.me" target="_blank" rel="noopener noreferrer">博客</a></li>
  <li><a href="https://github.com/ikingye" target="_blank" rel="noopener noreferrer">
    Github  <img src="https://img.shields.io/github/followers/ikingye.svg?label=%E5%85%B3%E6%B3%A8">
  </a></li>
  <li><a href="https://weibo.com/kingyip15215" target="_blank" rel="noopener noreferrer">
    微博  <img src="http://www.sinaimg.cn/blog/developer/wiki/LOGO_16x16.png">
  </a></li>
  <li><a href="https://www.zhihu.com/people/wutongyip" target="_blank" rel="noopener noreferrer">知乎</a></li>
  <li><a href="//shang.qq.com/wpa/qunwpa?idkey=04022778c1def4c4938c6d1e1880f6db3abf67bbfccc9ff74baa4fa9d73c377f&source_id=1_40001" target="_blank" rel="noopener noreferrer">Q 群</a></li>
</ul>
<hr />








  



  
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/note/docs/natural/" class="">第一部分 自然科学</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/note/docs/natural/math/" class="collapsed ">1.2 数学</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/natural/computer/" class="">1.5 计算机</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/humanities/" class="">第二部分 人文科学</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/note/docs/humanities/language/" class="collapsed ">2.2 语言</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/humanities/music/" class="collapsed ">2.5 音乐</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/humanities/movie/" class="collapsed ">2.7 电影</a>
  

          
  
  
  

  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/social/" class="">第三部分 社会科学</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/note/docs/social/history/" class="collapsed ">3.2 历史</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/social/economic/" class="collapsed ">3.4 经济</a>
  

          
  
  
  

  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/study/" class="">第四部分 学习</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/note/docs/study/book/" class="collapsed ">4.1 读书</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/study/course/" class="collapsed ">4.2 课程</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/study/degree/" class="collapsed ">4.3 学位</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/study/docs/" class="collapsed ">4.4 文档</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/study/domain/" class="collapsed ">4.5 领域</a>
  

          
  
  
  

  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/" class="">第五部分 生活</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/" class="collapsed ">5.1 日记</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/" class="">2020 年</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/07/" class="">7 月</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/07/30/" class="">2020-07-30</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/07/28/" class="">2020-07-28</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/07/27/" class="">2020-07-27</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/07/24/" class="">2020-07-24</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/07/23/" class="">2020-07-23</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/07/22/" class="">2020-07-22</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/07/21/" class="">2020-07-21</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/07/20/" class="">2020-07-20</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/07/17/" class="active">2020-07-17</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/07/16/" class="">2020-07-16</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/07/15/" class="">2020-07-15</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/07/14/" class="">2020-07-14</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/07/13/" class="">2020-07-13</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/07/11/" class="">2020-07-11</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/07/10/" class="">2020-07-10</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/07/09/" class="">2020-07-09</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/07/08/" class="">2020-07-08</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/07/07/" class="">2020-07-07</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/07/06/" class="">2020-07-06</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/07/05/" class="">2020-07-05</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/07/02/" class="">2020-07-02</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/07/01/" class="">2020-07-01</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/06/" class="collapsed ">6 月</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/05/" class="collapsed ">5 月</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/04/" class="collapsed ">4 月</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/diary/2020/03/" class="collapsed ">3 月</a>
  

          
  
  
  

  

        </li>
      
    
  </ul>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/parenting/" class="collapsed ">5.2 养育</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/cook/" class="collapsed ">5.5 下厨房</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note/docs/live/travel/" class="collapsed ">5.9 旅行</a>
  

          
  
  
  

  

        </li>
      
    
  </ul>
  

        </li>
      
    
  </ul>
  














<hr />
<ul>
  <li><a href="https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200417022040.png" target="_blank" rel="noopener noreferrer">加我微信</a></li>
  <li><a href="https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200428110046.png" target="_blank" rel="noopener noreferrer">请我喝饮料</a></li>
  <li><a href="https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200417021727.png" target="_blank" rel="noopener noreferrer">关注微信公众号</a></li>
</ul>

</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/note/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>2020-07-17</strong>

  <label for="toc-control">
    
    <img src="/note/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  <nav id="TableOfContents">
  <ul>
    <li><a href="#今日待办">今日待办</a></li>
    <li><a href="#编程">编程</a>
      <ul>
        <li><a href="#istio">Istio</a>
          <ul>
            <li><a href="#ingressgateway-代理">ingressGateway 代理</a></li>
            <li><a href="#rate-limit">rate limit</a></li>
            <li><a href="#故障注入">故障注入</a></li>
            <li><a href="#dashboad">Dashboad</a>
              <ul>
                <li><a href="#kiali">kiali</a></li>
              </ul>
            </li>
            <li><a href="#istio-api-resources">Istio API Resources</a>
              <ul>
                <li><a href="#gateway">Gateway</a></li>
                <li><a href="#virtualservice">VirtualService</a></li>
                <li><a href="#destinationrule">DestinationRule</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#openshift">OpenShift</a>
          <ul>
            <li><a href="#maistra">Maistra</a></li>
          </ul>
        </li>
        <li><a href="#消息队列">消息队列</a>
          <ul>
            <li><a href="#redis-vs-kafka">Redis vs Kafka</a></li>
            <li><a href="#rabbitmq-vs-kafka">RabbitMQ vs Kafka</a></li>
            <li><a href="#kafka">Kafka</a>
              <ul>
                <li><a href="#写入数据">写入数据</a></li>
                <li><a href="#读取数据">读取数据</a></li>
              </ul>
            </li>
            <li><a href="#nsq">NSQ</a></li>
            <li><a href="#nats">NATS</a>
              <ul>
                <li><a href="#nats-ionats-serverhttpsgithubcomnats-ionats-server-github-starshttpsimgshieldsiogithubstarsnats-ionats-serversvg"><a href="https://github.com/nats-io/nats-server">nats-io/nats-server</a> <img src="https://img.shields.io/github/stars/nats-io/nats-server.svg" alt="Github stars"></a></li>
                <li><a href="#nats-ionatsgohttpsgithubcomnats-ionatsgo-github-starshttpsimgshieldsiogithubstarsnats-ionatsgosvg"><a href="https://github.com/nats-io/nats.go">nats-io/nats.go</a> <img src="https://img.shields.io/github/stars/nats-io/nats.go.svg" alt="Github stars"></a></li>
                <li><a href="#nats-ionats-streaming-serverhttpsgithubcomnats-ionats-streaming-server-github-starshttpsimgshieldsiogithubstarsnats-ionats-streaming-serversvg"><a href="https://github.com/nats-io/nats-streaming-server">nats-io/nats-streaming-server</a> <img src="https://img.shields.io/github/stars/nats-io/nats-streaming-server.svg" alt="Github stars"></a></li>
              </ul>
            </li>
            <li><a href="#pulsar">Pulsar</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>


  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="2020-年-7-月-17-日星期五">
  2020 年 7 月 17 日（星期五）
  <a class="anchor" href="#2020-%e5%b9%b4-7-%e6%9c%88-17-%e6%97%a5%e6%98%9f%e6%9c%9f%e4%ba%94">#</a>
</h1>
<h2 id="今日待办">
  今日待办
  <a class="anchor" href="#%e4%bb%8a%e6%97%a5%e5%be%85%e5%8a%9e">#</a>
</h2>
<ul>
<li><input disabled="" type="checkbox"> </li>
</ul>
<hr>
<h2 id="编程">
  编程
  <a class="anchor" href="#%e7%bc%96%e7%a8%8b">#</a>
</h2>
<h3 id="istio">
  Istio
  <a class="anchor" href="#istio">#</a>
</h3>
<h4 id="ingressgateway-代理">
  ingressGateway 代理
  <a class="anchor" href="#ingressgateway-%e4%bb%a3%e7%90%86">#</a>
</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">server <span style="color:#f92672">{</span>
        listen 8500;

        location / <span style="color:#f92672">{</span>
                proxy_pass http://localhost:31443;
                <span style="color:#75715e"># nginx 反向代理默认走的 http 1.0 版本</span>
                <span style="color:#75715e"># 但是 被反向代理的服务器是 1.1 版本的！</span>
                proxy_http_version 1.1;
        <span style="color:#f92672">}</span>

    error_log /var/log/nginx/istio-ingressgateway_error.log;
    access_log /var/log/nginx/istio-ingressgateway_access.log;
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="rate-limit">
  rate limit
  <a class="anchor" href="#rate-limit">#</a>
</h4>
<p>安装</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># Policy enforcement must be enabled</span>
istioctl install --set profile<span style="color:#f92672">=</span>demo  --set meshConfig.disablePolicyChecks<span style="color:#f92672">=</span>false --set values.pilot.policy.enabled<span style="color:#f92672">=</span>true
</code></pre></div><h4 id="故障注入">
  故障注入
  <a class="anchor" href="#%e6%95%85%e9%9a%9c%e6%b3%a8%e5%85%a5">#</a>
</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#66d9ef">apiVersion</span>: networking.istio.io/v1alpha3
<span style="color:#66d9ef">kind</span>: VirtualService
<span style="color:#66d9ef">metadata</span>:
  <span style="color:#66d9ef">name</span>: ratings
<span style="color:#66d9ef">spec</span>:
  <span style="color:#66d9ef">hosts</span>:
  - ratings
  <span style="color:#66d9ef">http</span>:
  - <span style="color:#66d9ef">fault</span>:
      <span style="color:#66d9ef">delay</span>:
        <span style="color:#66d9ef">percentage</span>:
          <span style="color:#66d9ef">value</span>: <span style="color:#ae81ff">100.0</span>
        <span style="color:#66d9ef">fixedDelay</span>: 7s
      <span style="color:#66d9ef">abort</span>:
        <span style="color:#66d9ef">percentage</span>:
          <span style="color:#66d9ef">value</span>: <span style="color:#ae81ff">100.0</span>
        <span style="color:#66d9ef">httpStatus</span>: <span style="color:#ae81ff">500</span>
    <span style="color:#66d9ef">route</span>:
    - <span style="color:#66d9ef">destination</span>:
        <span style="color:#66d9ef">host</span>: ratings
        <span style="color:#66d9ef">subset</span>: v1
      <span style="color:#66d9ef">timeout</span>: <span style="color:#ae81ff">0.</span>5s
      <span style="color:#66d9ef">retries</span>:
        <span style="color:#66d9ef">attempts</span>: <span style="color:#ae81ff">3</span>
        <span style="color:#66d9ef">perTryTimeout</span>: 2s
</code></pre></div><hr>
<h4 id="dashboad">
  Dashboad
  <a class="anchor" href="#dashboad">#</a>
</h4>
<h5 id="kiali">
  kiali
  <a class="anchor" href="#kiali">#</a>
</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">istioctl dashboard kiali -p <span style="color:#ae81ff">8610</span>

<span style="color:#75715e"># nginx proxy 8510 to 8610</span>
http://yq01-sys-ote01.yq01.baidu.com:8510/
</code></pre></div><hr>
<h4 id="istio-api-resources">
  Istio API Resources
  <a class="anchor" href="#istio-api-resources">#</a>
</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">k api-resources
NAME                              SHORTNAMES   APIGROUP                       NAMESPACED   KIND
bindings                                                                      true         Binding
componentstatuses                 cs                                          false        ComponentStatus
configmaps                        cm                                          true         ConfigMap
endpoints                         ep                                          true         Endpoints
events                            ev                                          true         Event
limitranges                       limits                                      true         LimitRange
namespaces                        ns                                          false        Namespace
nodes                             no                                          false        Node
persistentvolumeclaims            pvc                                         true         PersistentVolumeClaim
persistentvolumes                 pv                                          false        PersistentVolume
pods                              po                                          true         Pod
podtemplates                                                                  true         PodTemplate
replicationcontrollers            rc                                          true         ReplicationController
resourcequotas                    quota                                       true         ResourceQuota
secrets                                                                       true         Secret
serviceaccounts                   sa                                          true         ServiceAccount
services                          svc                                         true         Service
mutatingwebhookconfigurations                  admissionregistration.k8s.io   false        MutatingWebhookConfiguration
validatingwebhookconfigurations                admissionregistration.k8s.io   false        ValidatingWebhookConfiguration
customresourcedefinitions         crd,crds     apiextensions.k8s.io           false        CustomResourceDefinition
apiservices                                    apiregistration.k8s.io         false        APIService
controllerrevisions                            apps                           true         ControllerRevision
daemonsets                        ds           apps                           true         DaemonSet
deployments                       deploy       apps                           true         Deployment
replicasets                       rs           apps                           true         ReplicaSet
statefulsets                      sts          apps                           true         StatefulSet
tokenreviews                                   authentication.k8s.io          false        TokenReview
localsubjectaccessreviews                      authorization.k8s.io           true         LocalSubjectAccessReview
selfsubjectaccessreviews                       authorization.k8s.io           false        SelfSubjectAccessReview
selfsubjectrulesreviews                        authorization.k8s.io           false        SelfSubjectRulesReview
subjectaccessreviews                           authorization.k8s.io           false        SubjectAccessReview
horizontalpodautoscalers          hpa          autoscaling                    true         HorizontalPodAutoscaler
cronjobs                          cj           batch                          true         CronJob
jobs                                           batch                          true         Job
certificatesigningrequests        csr          certificates.k8s.io            false        CertificateSigningRequest
adapters                                       config.istio.io                true         adapter
attributemanifests                             config.istio.io                true         attributemanifest
handlers                                       config.istio.io                true         handler
httpapispecbindings                            config.istio.io                true         HTTPAPISpecBinding
httpapispecs                                   config.istio.io                true         HTTPAPISpec
instances                                      config.istio.io                true         instance
quotaspecbindings                              config.istio.io                true         QuotaSpecBinding
quotaspecs                                     config.istio.io                true         QuotaSpec
rules                                          config.istio.io                true         rule
templates                                      config.istio.io                true         template
leases                                         coordination.k8s.io            true         Lease
endpointslices                                 discovery.k8s.io               true         EndpointSlice
events                            ev           events.k8s.io                  true         Event
ingresses                         ing          extensions                     true         Ingress
istiooperators                    iop          install.istio.io               true         IstioOperator
destinationrules                  dr           networking.istio.io            true         DestinationRule
envoyfilters                                   networking.istio.io            true         EnvoyFilter
gateways                          gw           networking.istio.io            true         Gateway
serviceentries                    se           networking.istio.io            true         ServiceEntry
sidecars                                       networking.istio.io            true         Sidecar
virtualservices                   vs           networking.istio.io            true         VirtualService
workloadentries                   we           networking.istio.io            true         WorkloadEntry
ingressclasses                                 networking.k8s.io              false        IngressClass
ingresses                         ing          networking.k8s.io              true         Ingress
networkpolicies                   netpol       networking.k8s.io              true         NetworkPolicy
runtimeclasses                                 node.k8s.io                    false        RuntimeClass
poddisruptionbudgets              pdb          policy                         true         PodDisruptionBudget
podsecuritypolicies               psp          policy                         false        PodSecurityPolicy
clusterrolebindings                            rbac.authorization.k8s.io      false        ClusterRoleBinding
clusterroles                                   rbac.authorization.k8s.io      false        ClusterRole
rolebindings                                   rbac.authorization.k8s.io      true         RoleBinding
roles                                          rbac.authorization.k8s.io      true         Role
clusterrbacconfigs                             rbac.istio.io                  false        ClusterRbacConfig
rbacconfigs                                    rbac.istio.io                  true         RbacConfig
servicerolebindings                            rbac.istio.io                  true         ServiceRoleBinding
serviceroles                                   rbac.istio.io                  true         ServiceRole
priorityclasses                   pc           scheduling.k8s.io              false        PriorityClass
authorizationpolicies                          security.istio.io              true         AuthorizationPolicy
peerauthentications               pa           security.istio.io              true         PeerAuthentication
requestauthentications            ra           security.istio.io              true         RequestAuthentication
csidrivers                                     storage.k8s.io                 false        CSIDriver
csinodes                                       storage.k8s.io                 false        CSINode
storageclasses                    sc           storage.k8s.io                 false        StorageClass
volumeattachments                              storage.k8s.io                 false        VolumeAttachment
</code></pre></div><h5 id="gateway">
  Gateway
  <a class="anchor" href="#gateway">#</a>
</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#66d9ef">apiVersion</span>: v1
<span style="color:#66d9ef">items</span>:
  - <span style="color:#66d9ef">apiVersion</span>: networking.istio.io/v1beta1
    <span style="color:#66d9ef">kind</span>: Gateway
    <span style="color:#66d9ef">metadata</span>:
      <span style="color:#66d9ef">annotations</span>:
        <span style="color:#66d9ef">kubectl.kubernetes.io/last-applied-configuration</span>: <span style="color:#e6db74">|
</span><span style="color:#e6db74">          {&#34;apiVersion&#34;:&#34;networking.istio.io/v1alpha3&#34;,&#34;kind&#34;:&#34;Gateway&#34;,&#34;metadata&#34;:{&#34;annotations&#34;:{},&#34;name&#34;:&#34;bookinfo-gateway&#34;,&#34;namespace&#34;:&#34;default&#34;},&#34;spec&#34;:{&#34;selector&#34;:{&#34;istio&#34;:&#34;ingressgateway&#34;},&#34;servers&#34;:[{&#34;hosts&#34;:[&#34;*&#34;],&#34;port&#34;:{&#34;name&#34;:&#34;http&#34;,&#34;number&#34;:80,&#34;protocol&#34;:&#34;HTTP&#34;}}]}}</span>
      <span style="color:#66d9ef">creationTimestamp</span>: <span style="color:#e6db74">&#34;2020-07-16T11:52:34Z&#34;</span>
      <span style="color:#66d9ef">generation</span>: <span style="color:#ae81ff">1</span>
      <span style="color:#66d9ef">managedFields</span>:
        - <span style="color:#66d9ef">apiVersion</span>: networking.istio.io/v1alpha3
          <span style="color:#66d9ef">fieldsType</span>: FieldsV1
          <span style="color:#66d9ef">fieldsV1</span>:
            <span style="color:#66d9ef">f:metadata</span>:
              <span style="color:#66d9ef">f:annotations</span>:
                <span style="color:#66d9ef">.</span>: {}
                <span style="color:#66d9ef">f:kubectl.kubernetes.io/last-applied-configuration</span>: {}
            <span style="color:#66d9ef">f:spec</span>:
              <span style="color:#66d9ef">.</span>: {}
              <span style="color:#66d9ef">f:selector</span>:
                <span style="color:#66d9ef">.</span>: {}
                <span style="color:#66d9ef">f:istio</span>: {}
              <span style="color:#66d9ef">f:servers</span>: {}
          <span style="color:#66d9ef">manager</span>: kubectl
          <span style="color:#66d9ef">operation</span>: Update
          <span style="color:#66d9ef">time</span>: <span style="color:#e6db74">&#34;2020-07-16T11:52:34Z&#34;</span>
      <span style="color:#66d9ef">name</span>: bookinfo-gateway
      <span style="color:#66d9ef">namespace</span>: default
      <span style="color:#66d9ef">resourceVersion</span>: <span style="color:#e6db74">&#34;48172&#34;</span>
      <span style="color:#66d9ef">selfLink</span>: /apis/networking.istio.io/v1beta1/namespaces/default/gateways/bookinfo-gateway
      <span style="color:#66d9ef">uid</span>: c68d67b3-a460-40ff-9dcb-b6fd0e2d56f5
    <span style="color:#66d9ef">spec</span>:
      <span style="color:#66d9ef">selector</span>:
        <span style="color:#66d9ef">istio</span>: ingressgateway
      <span style="color:#66d9ef">servers</span>:
        - <span style="color:#66d9ef">hosts</span>:
            - <span style="color:#e6db74">&#34;*&#34;</span>
          <span style="color:#66d9ef">port</span>:
            <span style="color:#66d9ef">name</span>: http
            <span style="color:#66d9ef">number</span>: <span style="color:#ae81ff">80</span>
            <span style="color:#66d9ef">protocol</span>: HTTP
<span style="color:#66d9ef">kind</span>: List
<span style="color:#66d9ef">metadata</span>:
  <span style="color:#66d9ef">resourceVersion</span>: <span style="color:#e6db74">&#34;&#34;</span>
  <span style="color:#66d9ef">selfLink</span>: <span style="color:#e6db74">&#34;&#34;</span>
</code></pre></div><h5 id="virtualservice">
  VirtualService
  <a class="anchor" href="#virtualservice">#</a>
</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#66d9ef">apiVersion</span>: v1
<span style="color:#66d9ef">items</span>:
  - <span style="color:#66d9ef">apiVersion</span>: networking.istio.io/v1beta1
    <span style="color:#66d9ef">kind</span>: VirtualService
    <span style="color:#66d9ef">metadata</span>:
      <span style="color:#66d9ef">annotations</span>:
        <span style="color:#66d9ef">kubectl.kubernetes.io/last-applied-configuration</span>: <span style="color:#e6db74">|
</span><span style="color:#e6db74">          {&#34;apiVersion&#34;:&#34;networking.istio.io/v1alpha3&#34;,&#34;kind&#34;:&#34;VirtualService&#34;,&#34;metadata&#34;:{&#34;annotations&#34;:{},&#34;name&#34;:&#34;bookinfo&#34;,&#34;namespace&#34;:&#34;default&#34;},&#34;spec&#34;:{&#34;gateways&#34;:[&#34;bookinfo-gateway&#34;],&#34;hosts&#34;:[&#34;*&#34;],&#34;http&#34;:[{&#34;match&#34;:[{&#34;uri&#34;:{&#34;exact&#34;:&#34;/productpage&#34;}},{&#34;uri&#34;:{&#34;prefix&#34;:&#34;/static&#34;}},{&#34;uri&#34;:{&#34;exact&#34;:&#34;/login&#34;}},{&#34;uri&#34;:{&#34;exact&#34;:&#34;/logout&#34;}},{&#34;uri&#34;:{&#34;prefix&#34;:&#34;/api/v1/products&#34;}}],&#34;route&#34;:[{&#34;destination&#34;:{&#34;host&#34;:&#34;productpage&#34;,&#34;port&#34;:{&#34;number&#34;:9080}}}]}]}}</span>
      <span style="color:#66d9ef">creationTimestamp</span>: <span style="color:#e6db74">&#34;2020-07-16T11:52:34Z&#34;</span>
      <span style="color:#66d9ef">generation</span>: <span style="color:#ae81ff">1</span>
      <span style="color:#66d9ef">managedFields</span>:
        - <span style="color:#66d9ef">apiVersion</span>: networking.istio.io/v1alpha3
          <span style="color:#66d9ef">fieldsType</span>: FieldsV1
          <span style="color:#66d9ef">fieldsV1</span>:
            <span style="color:#66d9ef">f:metadata</span>:
              <span style="color:#66d9ef">f:annotations</span>:
                <span style="color:#66d9ef">.</span>: {}
                <span style="color:#66d9ef">f:kubectl.kubernetes.io/last-applied-configuration</span>: {}
            <span style="color:#66d9ef">f:spec</span>:
              <span style="color:#66d9ef">.</span>: {}
              <span style="color:#66d9ef">f:gateways</span>: {}
              <span style="color:#66d9ef">f:hosts</span>: {}
              <span style="color:#66d9ef">f:http</span>: {}
          <span style="color:#66d9ef">manager</span>: kubectl
          <span style="color:#66d9ef">operation</span>: Update
          <span style="color:#66d9ef">time</span>: <span style="color:#e6db74">&#34;2020-07-16T11:52:34Z&#34;</span>
      <span style="color:#66d9ef">name</span>: bookinfo
      <span style="color:#66d9ef">namespace</span>: default
      <span style="color:#66d9ef">resourceVersion</span>: <span style="color:#e6db74">&#34;48173&#34;</span>
      <span style="color:#66d9ef">selfLink</span>: /apis/networking.istio.io/v1beta1/namespaces/default/virtualservices/bookinfo
      <span style="color:#66d9ef">uid</span>: 58d24344-c170<span style="color:#ae81ff">-4814</span>-aed4-ab4a437c7074
    <span style="color:#66d9ef">spec</span>:
      <span style="color:#66d9ef">gateways</span>:
        - bookinfo-gateway
      <span style="color:#66d9ef">hosts</span>:
        - <span style="color:#e6db74">&#34;*&#34;</span>
      <span style="color:#66d9ef">http</span>:
        - <span style="color:#66d9ef">match</span>:
            - <span style="color:#66d9ef">uri</span>:
                <span style="color:#66d9ef">exact</span>: /productpage
            - <span style="color:#66d9ef">uri</span>:
                <span style="color:#66d9ef">prefix</span>: /static
            - <span style="color:#66d9ef">uri</span>:
                <span style="color:#66d9ef">exact</span>: /login
            - <span style="color:#66d9ef">uri</span>:
                <span style="color:#66d9ef">exact</span>: /logout
            - <span style="color:#66d9ef">uri</span>:
                <span style="color:#66d9ef">prefix</span>: /api/v1/products
          <span style="color:#66d9ef">route</span>:
            - <span style="color:#66d9ef">destination</span>:
                <span style="color:#66d9ef">host</span>: productpage
                <span style="color:#66d9ef">port</span>:
                  <span style="color:#66d9ef">number</span>: <span style="color:#ae81ff">9080</span>
</code></pre></div><h5 id="destinationrule">
  DestinationRule
  <a class="anchor" href="#destinationrule">#</a>
</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">- <span style="color:#66d9ef">apiVersion</span>: networking.istio.io/v1beta1
  <span style="color:#66d9ef">kind</span>: DestinationRule
  <span style="color:#66d9ef">metadata</span>:
    <span style="color:#66d9ef">annotations</span>:
      <span style="color:#66d9ef">kubectl.kubernetes.io/last-applied-configuration</span>: <span style="color:#e6db74">|
</span><span style="color:#e6db74">        {&#34;apiVersion&#34;:&#34;networking.istio.io/v1alpha3&#34;,&#34;kind&#34;:&#34;DestinationRule&#34;,&#34;metadata&#34;:{&#34;annotations&#34;:{},&#34;name&#34;:&#34;productpage&#34;,&#34;namespace&#34;:&#34;default&#34;},&#34;spec&#34;:{&#34;host&#34;:&#34;productpage&#34;,&#34;subsets&#34;:[{&#34;labels&#34;:{&#34;version&#34;:&#34;v1&#34;},&#34;name&#34;:&#34;v1&#34;}]}}</span>
    <span style="color:#66d9ef">creationTimestamp</span>: <span style="color:#e6db74">&#34;2020-07-17T06:56:38Z&#34;</span>
    <span style="color:#66d9ef">generation</span>: <span style="color:#ae81ff">1</span>
    <span style="color:#66d9ef">managedFields</span>:
      - <span style="color:#66d9ef">apiVersion</span>: networking.istio.io/v1alpha3
        <span style="color:#66d9ef">fieldsType</span>: FieldsV1
        <span style="color:#66d9ef">fieldsV1</span>:
          <span style="color:#66d9ef">f:metadata</span>:
            <span style="color:#66d9ef">f:annotations</span>:
              <span style="color:#66d9ef">.</span>: {}
              <span style="color:#66d9ef">f:kubectl.kubernetes.io/last-applied-configuration</span>: {}
          <span style="color:#66d9ef">f:spec</span>:
            <span style="color:#66d9ef">.</span>: {}
            <span style="color:#66d9ef">f:host</span>: {}
            <span style="color:#66d9ef">f:subsets</span>: {}
        <span style="color:#66d9ef">manager</span>: kubectl
        <span style="color:#66d9ef">operation</span>: Update
        <span style="color:#66d9ef">time</span>: <span style="color:#e6db74">&#34;2020-07-17T06:56:38Z&#34;</span>
    <span style="color:#66d9ef">name</span>: productpage
    <span style="color:#66d9ef">namespace</span>: default
    <span style="color:#66d9ef">resourceVersion</span>: <span style="color:#e6db74">&#34;242215&#34;</span>
    <span style="color:#66d9ef">selfLink</span>: /apis/networking.istio.io/v1beta1/namespaces/default/destinationrules/productpage
    <span style="color:#66d9ef">uid</span>: 86e431d8<span style="color:#ae81ff">-1e98</span>-46d8-950e-3ae796496d67
  <span style="color:#66d9ef">spec</span>:
    <span style="color:#66d9ef">host</span>: productpage
    <span style="color:#66d9ef">subsets</span>:
      - <span style="color:#66d9ef">labels</span>:
          <span style="color:#66d9ef">version</span>: v1
        <span style="color:#66d9ef">name</span>: v1
</code></pre></div><hr>
<h3 id="openshift">
  OpenShift
  <a class="anchor" href="#openshift">#</a>
</h3>
<h4 id="maistra">
  Maistra
  <a class="anchor" href="#maistra">#</a>
</h4>
<p><a href="https://maistra.io/">Maistra</a> is an opinionated distribution of Istio designed to work with <code>Openshift</code>.
It combines Kiali, Jaeger, and Prometheus into a platform managed according to the OperatorHub lifecycle.</p>
<p>Before deploying and running Kiali, you must first install and deploy Istio.
There are a few places that you can reference in order to learn how to do this.
We recommend using <a href="https://maistra.io/docs/installation/">Maistra</a> which is a variant of Istio.</p>
<p>参考：</p>
<ul>
<li><a href="https://github.com/kiali/kiali#getting-started">kiali: getting-started</a></li>
</ul>
<hr>
<h3 id="消息队列">
  消息队列
  <a class="anchor" href="#%e6%b6%88%e6%81%af%e9%98%9f%e5%88%97">#</a>
</h3>
<ul>
<li>Kafka (Scala)
<ul>
<li>基于 Pull 的模式来处理消息消费，追求高吞吐量</li>
<li>日志采集功能</li>
</ul>
</li>
<li>RocketMQ (Java)
<ul>
<li>金融互联网领域</li>
<li>协议：自己定义的</li>
</ul>
</li>
<li>RabbitMQ (Erlang)
<ul>
<li>功能比较完备，小公司优先选择</li>
<li>协议：<code>AMQP</code>（二进制），<code>STOMP</code>（文本），<code>MQTT</code>（二进制），<code>HTTP</code>（里面包装其他协议）等</li>
</ul>
</li>
<li>ActiveMQ (Java)
<ul>
<li>协议：OpenWire、STOMP、REST、XMPP、AMQP</li>
</ul>
</li>
<li>ZeroMQ (C)
<ul>
<li>协议：TCP、UDP</li>
<li>只是一个异步消息库</li>
<li>需要对自己的业务代码进行改造，不利于服务解耦</li>
</ul>
</li>
<li>NATS</li>
<li>NSQ</li>
<li>MQTT</li>
<li>MSMQ</li>
<li>Pulsar</li>
</ul>
<p>参考：</p>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/161224418">面试官：RabbitMQ 和 Kafka 选哪个？</a></li>
<li><a href="https://www.zhihu.com/question/275090117">Kafka、RabbitMQ、RocketMQ 之间的区别是什么？</a></li>
<li><a href="https://www.zhihu.com/question/22480085">RabbitMQ, ZeroMQ, Kafka 是一个层级的东西吗， 相互之间有哪些优缺点？</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/60288391">消息队列 Kafka、RocketMQ、RabbitMQ 的优劣势比较</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/37993013">IM 系统的 MQ 消息中间件选型：Kafka 还是 RabbitMQ？</a></li>
<li><a href="https://www.zhihu.com/question/43557507">Kafka，Mq，Redis 作为消息队列使用时的差异？</a></li>
</ul>
<h4 id="redis-vs-kafka">
  Redis vs Kafka
  <a class="anchor" href="#redis-vs-kafka">#</a>
</h4>
<ul>
<li>实时 vs 可靠
<ul>
<li>redis 消息推送（基于分布式 pub/sub）多用于实时性较高的消息推送，并<strong>不保证可靠</strong>。</li>
<li>其他的 mq 和 kafka 保证可靠但有一些延迟（非实时系统没有保证延迟）。</li>
</ul>
</li>
<li>分组
<ul>
<li>redis 发布订阅除了表示不同的 topic 外，并不支持分组</li>
<li>kafka 同一个组里只有一个订阅者会收到该消息，这样可以用作<strong>负载均衡</strong></li>
</ul>
</li>
</ul>
<h4 id="rabbitmq-vs-kafka">
  RabbitMQ vs Kafka
  <a class="anchor" href="#rabbitmq-vs-kafka">#</a>
</h4>
<p>优先选择 RabbitMQ 的条件：</p>
<ul>
<li>高级灵活的路由规则；</li>
<li>消息时序控制（控制消息过期或者消息延迟）；</li>
<li>高级的容错处理能力，在消费者更有可能处理消息不成功的情景中（瞬时或者持久）；</li>
<li>更简单的消费者实现。</li>
</ul>
<p>优先选择 Kafka 的条件：</p>
<ul>
<li>严格的消息顺序；</li>
<li>延长<strong>消息留存时间</strong>，包括过去消息重放的可能；</li>
<li>传统解决方案无法满足的<strong>高伸缩</strong>能力。</li>
<li>RabbitMQ 在有<strong>大量消息堆积</strong>的情况下性能会下降，Kafka 不会</li>
</ul>
<h4 id="kafka">
  Kafka
  <a class="anchor" href="#kafka">#</a>
</h4>
<p>Kafka 速度的秘诀在于，
它把所有的消息都变成一个批量的文件，并且进行合理的批量压缩，减少网络 IO 损耗，
通过 mmap 提高 I/O 速度，
写入数据的时候由于单个 Partion 是末尾添加所以速度最优；
读取数据的时候配合 sendfile 直接暴力输出。</p>
<h5 id="写入数据">
  写入数据
  <a class="anchor" href="#%e5%86%99%e5%85%a5%e6%95%b0%e6%8d%ae">#</a>
</h5>
<ul>
<li>顺序写入
<ul>
<li><strong>顺序写入磁盘顺序读写速度超过内存随机读写</strong></li>
<li>顺序写入 JVM 的 GC 效率低，内存占用大，使用磁盘可以避免这一问题</li>
<li>顺序写入系统冷启动后，磁盘缓存依然可用</li>
<li>问题：没有办法删除数据
<ul>
<li>所以 Kafka 会把所有的数据都保留下来，每个消费者对每个 Topic 都有一个 <code>offset</code> 用来表示读取到了第几条数据</li>
<li>Kakfa 提供了两种策略来删除数据
<ul>
<li>基于时间</li>
<li>基于 Partition 文件大小</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>MMFile (Memory Mapped Files)
<ul>
<li>Kafka 的数据并不是实时的写入硬盘 ，它充分利用了现代操作系统分页存储来利用内存提高 I/O 效率</li>
</ul>
</li>
</ul>
<h5 id="读取数据">
  读取数据
  <a class="anchor" href="#%e8%af%bb%e5%8f%96%e6%95%b0%e6%8d%ae">#</a>
</h5>
<ul>
<li>基于 sendfile 实现 Zero Copy
<ul>
<li>硬盘<code>—&gt;</code>内核 buf<code>—&gt;</code>用户 buf<code>—&gt;</code>socket 相关缓冲区<code>—&gt;</code>协议引擎</li>
<li>内核版本 2.1 引进的 sendfile 已经减少了内核缓冲区到 user 缓冲区</li>
<li>内核版本 2.4 之后，文件描述符结果被改变，sendfile 实现了更简单的方式，再次减少了一次 copy 操作</li>
</ul>
</li>
<li>批量压缩
<ul>
<li>Kafka 使用了批量压缩，即将多个消息一起压缩</li>
<li>Kafka 支持多种压缩协议，包括 Gzip 和 Snappy 压缩协议</li>
</ul>
</li>
</ul>
<p>参考：</p>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/147054382">面试问：Kafka 为什么速度那么快？</a></li>
</ul>
<h4 id="nsq">
  NSQ
  <a class="anchor" href="#nsq">#</a>
</h4>
<p><a href="https://github.com/nsqio/nsq">nsqio/nsq</a> <img src="https://img.shields.io/github/stars/nsqio/nsq.svg" alt="Github stars" /></p>
<p>NSQ is a realtime distributed messaging platform designed to operate at scale, handling billions of messages per day.</p>
<p>Go 语言消息队列 NSQ</p>
<p><img src="https://pic1.zhimg.com/v2-e7c2d63d53f9486acf031c307df86e7f_r.webp" alt="" /></p>
<h4 id="nats">
  NATS
  <a class="anchor" href="#nats">#</a>
</h4>
<a href="https://github.com/nats-io/nats-server">nats-io/nats-server</a> <h5 id="nats-ionats-serverhttpsgithubcomnats-ionats-server-github-starshttpsimgshieldsiogithubstarsnats-ionats-serversvg">
  <img src="https://img.shields.io/github/stars/nats-io/nats-server.svg" alt="Github stars" />
  <a class="anchor" href="#nats-ionats-serverhttpsgithubcomnats-ionats-server-github-starshttpsimgshieldsiogithubstarsnats-ionats-serversvg">#</a>
</h5>
<p>High-Performance server for NATS, the cloud native messaging system.</p>
<a href="https://github.com/nats-io/nats.go">nats-io/nats.go</a> <h5 id="nats-ionatsgohttpsgithubcomnats-ionatsgo-github-starshttpsimgshieldsiogithubstarsnats-ionatsgosvg">
  <img src="https://img.shields.io/github/stars/nats-io/nats.go.svg" alt="Github stars" />
  <a class="anchor" href="#nats-ionatsgohttpsgithubcomnats-ionatsgo-github-starshttpsimgshieldsiogithubstarsnats-ionatsgosvg">#</a>
</h5>
<p>Golang client for NATS, the cloud native messaging system.</p>
<a href="https://github.com/nats-io/nats-streaming-server">nats-io/nats-streaming-server</a> <h5 id="nats-ionats-streaming-serverhttpsgithubcomnats-ionats-streaming-server-github-starshttpsimgshieldsiogithubstarsnats-ionats-streaming-serversvg">
  <img src="https://img.shields.io/github/stars/nats-io/nats-streaming-server.svg" alt="Github stars" />
  <a class="anchor" href="#nats-ionats-streaming-serverhttpsgithubcomnats-ionats-streaming-server-github-starshttpsimgshieldsiogithubstarsnats-ionats-streaming-serversvg">#</a>
</h5>
<p>NATS Streaming is an extremely performant, lightweight reliable streaming platform built on NATS.</p>
<hr>
<h4 id="pulsar">
  Pulsar
  <a class="anchor" href="#pulsar">#</a>
</h4>
<p>参考：</p>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/68809190">选择 Pulsar 而不是 Kafka 的 7 大理由</a></li>
</ul>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">



  <div><a class="flex align-center" href="https://github.com/ikingye/note/commit/95618e0c1cda9ea4f7601035b447098c8d4dc37f" title='Last modified by yewang | 2020-07-21' target="_blank" rel="noopener">
      <img src="/note/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>2020-07-21</span>
    </a>
  </div>



</div>

 
        
      </footer>

      
  
  <div class="book-comments">
<script src="https://utteranc.es/client.js"
  repo="ikingye/note"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async>
</script>

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#今日待办">今日待办</a></li>
    <li><a href="#编程">编程</a>
      <ul>
        <li><a href="#istio">Istio</a>
          <ul>
            <li><a href="#ingressgateway-代理">ingressGateway 代理</a></li>
            <li><a href="#rate-limit">rate limit</a></li>
            <li><a href="#故障注入">故障注入</a></li>
            <li><a href="#dashboad">Dashboad</a>
              <ul>
                <li><a href="#kiali">kiali</a></li>
              </ul>
            </li>
            <li><a href="#istio-api-resources">Istio API Resources</a>
              <ul>
                <li><a href="#gateway">Gateway</a></li>
                <li><a href="#virtualservice">VirtualService</a></li>
                <li><a href="#destinationrule">DestinationRule</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#openshift">OpenShift</a>
          <ul>
            <li><a href="#maistra">Maistra</a></li>
          </ul>
        </li>
        <li><a href="#消息队列">消息队列</a>
          <ul>
            <li><a href="#redis-vs-kafka">Redis vs Kafka</a></li>
            <li><a href="#rabbitmq-vs-kafka">RabbitMQ vs Kafka</a></li>
            <li><a href="#kafka">Kafka</a>
              <ul>
                <li><a href="#写入数据">写入数据</a></li>
                <li><a href="#读取数据">读取数据</a></li>
              </ul>
            </li>
            <li><a href="#nsq">NSQ</a></li>
            <li><a href="#nats">NATS</a>
              <ul>
                <li><a href="#nats-ionats-serverhttpsgithubcomnats-ionats-server-github-starshttpsimgshieldsiogithubstarsnats-ionats-serversvg"><a href="https://github.com/nats-io/nats-server">nats-io/nats-server</a> <img src="https://img.shields.io/github/stars/nats-io/nats-server.svg" alt="Github stars"></a></li>
                <li><a href="#nats-ionatsgohttpsgithubcomnats-ionatsgo-github-starshttpsimgshieldsiogithubstarsnats-ionatsgosvg"><a href="https://github.com/nats-io/nats.go">nats-io/nats.go</a> <img src="https://img.shields.io/github/stars/nats-io/nats.go.svg" alt="Github stars"></a></li>
                <li><a href="#nats-ionats-streaming-serverhttpsgithubcomnats-ionats-streaming-server-github-starshttpsimgshieldsiogithubstarsnats-ionats-streaming-serversvg"><a href="https://github.com/nats-io/nats-streaming-server">nats-io/nats-streaming-server</a> <img src="https://img.shields.io/github/stars/nats-io/nats-streaming-server.svg" alt="Github stars"></a></li>
              </ul>
            </li>
            <li><a href="#pulsar">Pulsar</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
<a href="https://github.com/ikingye/note"
class="github-corner" aria-label="View source on GitHub">
<svg width="80" height="80" viewBox="0 0 250 250" style="fill:#fff; color:#151513; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
  <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
  <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
  <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
</svg></a>
<style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

</body>

</html>












